var routeGeojsonFeature = {
  type: "LineString",
  coordinates: [
    [10.52308, 52.25849],
    [10.52306, 52.25844],
    [10.52304, 52.25842],
    [10.52287, 52.25819],
    [10.52264, 52.2579],
    [10.52259, 52.25784],
    [10.52224, 52.25739],
    [10.52218, 52.25731],
    [10.52213, 52.25723],
    [10.522, 52.25706],
    [10.5219, 52.25687],
    [10.52186, 52.25675],
    [10.52187, 52.25661],
    [10.52193, 52.25648],
    [10.522, 52.25637],
    [10.52205, 52.25635],
    [10.52214, 52.25631],
    [10.52227, 52.25626],
    [10.52236, 52.25611],
    [10.52255, 52.25588],
    [10.52259, 52.25581],
    [10.5228, 52.25552],
    [10.52293, 52.25531],
    [10.52314, 52.25494],
    [10.52327, 52.25469],
    [10.52339, 52.25442],
    [10.52343, 52.25426],
    [10.52352, 52.25412],
    [10.5236, 52.25397],
    [10.52376, 52.25375],
    [10.52393, 52.25353],
    [10.52401, 52.25345],
    [10.52402, 52.25344],
    [10.52412, 52.25335],
    [10.52417, 52.25329],
    [10.52428, 52.25317],
    [10.52436, 52.25301],
    [10.52435, 52.25284],
    [10.52426, 52.25263],
    [10.52406, 52.25245],
    [10.52393, 52.25244],
    [10.52384, 52.25244],
    [10.52372, 52.25245],
    [10.52352, 52.25249],
    [10.52322, 52.25256],
    [10.52305, 52.25258],
    [10.52287, 52.2526],
    [10.5226, 52.25259],
    [10.5223, 52.25256],
    [10.52228, 52.25256],
    [10.52202, 52.25253],
    [10.52199, 52.25253],
    [10.52174, 52.25255],
    [10.52155, 52.25261],
    [10.52149, 52.25264],
    [10.52141, 52.25268],
    [10.52134, 52.25272],
    [10.52123, 52.25279],
    [10.52112, 52.25289],
    [10.52108, 52.25294],
    [10.52104, 52.25299],
    [10.52101, 52.25307],
    [10.52098, 52.25313],
    [10.52096, 52.25324],
    [10.52096, 52.25329],
    [10.52081, 52.25334],
    [10.52073, 52.25334],
    [10.52075, 52.25351],
    [10.52074, 52.25362],
    [10.52084, 52.25376],
    [10.5209, 52.25386],
    [10.52098, 52.25397],
    [10.52101, 52.25403],
    [10.5211, 52.2542],
    [10.52111, 52.25423],
    [10.52114, 52.25439],
    [10.52123, 52.25456],
    [10.52132, 52.25482],
    [10.5214, 52.25499],
    [10.52144, 52.25509],
    [10.52141, 52.25514],
    [10.5214, 52.25522],
    [10.52139, 52.25543],
    [10.52137, 52.25566],
    [10.52133, 52.2558],
    [10.52131, 52.25587],
    [10.52126, 52.25597],
    [10.52121, 52.25605],
    [10.52118, 52.25611],
    [10.52113, 52.2562],
    [10.52109, 52.25627],
    [10.52098, 52.2565],
    [10.52091, 52.25666],
    [10.52084, 52.25683],
    [10.52077, 52.25699],
    [10.52075, 52.25707],
    [10.52075, 52.25712],
    [10.52075, 52.25719],
    [10.52059, 52.25717],
    [10.5203, 52.25715],
    [10.52001, 52.25713],
    [10.52002, 52.25724],
    [10.52003, 52.2573],
    [10.52005, 52.25742],
    [10.52006, 52.25744],
    [10.52006, 52.25758],
    [10.52005, 52.25771],
    [10.52003, 52.25781],
    [10.52001, 52.25787],
    [10.51997, 52.25799],
    [10.51985, 52.2582],
    [10.51982, 52.25823],
    [10.51977, 52.25829],
    [10.51969, 52.2584],
    [10.5196, 52.25846],
    [10.51957, 52.25848],
    [10.51955, 52.25849],
    [10.51955, 52.25851],
    [10.51955, 52.25852],
    [10.51955, 52.25854],
    [10.51962, 52.25883],
    [10.51962, 52.25885],
    [10.51962, 52.25886],
    [10.51961, 52.25887],
    [10.51959, 52.25888],
    [10.51949, 52.2589],
    [10.51952, 52.259],
    [10.51959, 52.2592],
    [10.51917, 52.25927],
    [10.51903, 52.25928],
    [10.51872, 52.25929],
    [10.51863, 52.25929],
    [10.51857, 52.25928],
    [10.51844, 52.25929],
    [10.5184, 52.25929],

    // point

    [10.51957, 52.25839],
    [10.51945, 52.25838],
    [10.51944, 52.25844],
    [10.51909, 52.25841],
    [10.51895, 52.25839],
    [10.5189, 52.25839],
    [10.51876, 52.25837],
    [10.51869, 52.25836],
    [10.51854, 52.25834],
    [10.51849, 52.25833],
    [10.51827, 52.25829],
    [10.51817, 52.25827],
    [10.51813, 52.25826],
    [10.51803, 52.25823],
    [10.51801, 52.25823],
    [10.51775, 52.25816],
    [10.51769, 52.25825],
    [10.51764, 52.25833],
    [10.5176, 52.25836],
    [10.51755, 52.25842],
    [10.51748, 52.25849],
    [10.51743, 52.25853],
    [10.51729, 52.25865],
    [10.51713, 52.25876],
    [10.51707, 52.25879],
    [10.51703, 52.25882],
    [10.51696, 52.25887],
    [10.51688, 52.25892],
    [10.5168, 52.25897],
    [10.51677, 52.25899],
    [10.51673, 52.25902],
    [10.51668, 52.25892],
    [10.51659, 52.25896],
    [10.51657, 52.25896],
    [10.51652, 52.25896],
    [10.51648, 52.25897],
    [10.51643, 52.25897],
    [10.51636, 52.25896],
    [10.51627, 52.25893],
    [10.51606, 52.25885],
    [10.51588, 52.25879],
    [10.51585, 52.25878],
    [10.51573, 52.25874],
    [10.5154, 52.25866],
    [10.51524, 52.25864],
    [10.51517, 52.2586],
    [10.51511, 52.25859],
    [10.51496, 52.25857],
    [10.51481, 52.25853],
    [10.51469, 52.25856],
    [10.51457, 52.25855],
    [10.51444, 52.25853],
    [10.51436, 52.25852],
    [10.51426, 52.25853],
    [10.51418, 52.25855],
    [10.51413, 52.25858],
    [10.51404, 52.25862],
    [10.51399, 52.25864],
    [10.51387, 52.25882],
    [10.51381, 52.25891],
    [10.51351, 52.25935],
    [10.51293, 52.26016],
    [10.51254, 52.26073],
    [10.51221, 52.26123],
    [10.51194, 52.2616],
    [10.51159, 52.26213],
    [10.51161, 52.26217],
    [10.51174, 52.26238],
    [10.5121, 52.26238],
    [10.51221, 52.26239],

    // point

    [10.51152, 52.26224],
    [10.51145, 52.26235],
    [10.51128, 52.26261],
    [10.51122, 52.26268],
    [10.51119, 52.2627],
    [10.51105, 52.26285],
    [10.51082, 52.26301],
    [10.5107, 52.26308],
    [10.51059, 52.26315],
    [10.51049, 52.26322],
    [10.51043, 52.26326],
    [10.51034, 52.26339],
    [10.5102, 52.26365],
    [10.51012, 52.26389],
    [10.51011, 52.26403],
    [10.5101, 52.26415],
    [10.51013, 52.26436],
    [10.51021, 52.26456],
    [10.51032, 52.26478],
    [10.51048, 52.26498],
    [10.5106, 52.26514],
    [10.51088, 52.26539],
    [10.51131, 52.26574],
    [10.51173, 52.2661],
    [10.51214, 52.26652],
    [10.5127, 52.267],
    [10.51282, 52.2671],
    [10.51336, 52.26755],
    [10.51318, 52.26762],
    [10.51309, 52.26768],
    [10.51306, 52.26769],
    [10.51292, 52.26776],
    [10.51281, 52.26782],
    [10.51277, 52.26784],
    [10.51273, 52.26788],
    [10.5129, 52.26794],
    [10.51311, 52.2679],
    [10.51325, 52.26786],
    [10.51329, 52.26785],
    [10.51338, 52.26782],
    [10.51343, 52.2678],
    [10.51351, 52.26781],
    [10.51356, 52.26783],
    [10.51362, 52.26786],
    [10.51365, 52.26789],
    [10.51396, 52.26816],
    [10.51408, 52.26826],
    [10.51423, 52.2683],
    [10.51426, 52.26839],
    [10.51436, 52.26845],
    [10.51451, 52.26856],
    [10.51463, 52.26867],
    [10.5149, 52.26897],
    [10.51502, 52.26912],
    [10.51504, 52.26915],
    [10.51506, 52.26916],
    [10.51509, 52.26918],
    [10.51516, 52.26922],
    [10.51527, 52.26925],
    [10.51557, 52.26933],
    [10.51558, 52.26933],
    [10.51573, 52.26938],
    [10.51582, 52.26942],
    [10.51584, 52.26943],
    [10.51594, 52.2695],
    [10.51603, 52.2696],
    [10.51617, 52.26974],
    [10.51632, 52.26984],
    [10.51648, 52.26991],
    [10.51658, 52.26994],
    [10.51671, 52.26995],
    [10.51685, 52.26995],
    [10.51697, 52.26993],
    [10.5171, 52.26991],
    [10.51725, 52.26986],
    [10.51738, 52.26983],
    [10.51754, 52.2698],
    [10.51766, 52.26979],
    [10.51793, 52.26976],
    [10.51813, 52.26979],
    [10.51844, 52.26985],
    [10.51878, 52.26996],
    [10.51888, 52.27],
    [10.51907, 52.27008],
    [10.51911, 52.2701],
    [10.51934, 52.27021],
    [10.51943, 52.27028],
    [10.51956, 52.27036],
    [10.51972, 52.27046],
    [10.51986, 52.27052],
    [10.51992, 52.27055],
    [10.52019, 52.27064],
    [10.52044, 52.27073],
    [10.52075, 52.2709],
    [10.52094, 52.27101],
    [10.52173, 52.27144],
    [10.52191, 52.27155],
    [10.52214, 52.27167],
    [10.52223, 52.27173],
    [10.5223, 52.27177],
    [10.52236, 52.2718],
    [10.52243, 52.27184],
    [10.52252, 52.27182],
    [10.52267, 52.27178],
    [10.52289, 52.27174],
    [10.52302, 52.27172],
    [10.52321, 52.27168],
    [10.52362, 52.27161],
    [10.52372, 52.27158],
    [10.52389, 52.27155],
    [10.52394, 52.27153],
    [10.52406, 52.27162],
    [10.52408, 52.27163],
    [10.52413, 52.27171],
    [10.52433, 52.272],
    [10.52436, 52.27206],
    [10.52447, 52.27225],
    [10.52452, 52.27234],
    [10.52453, 52.27236],
    [10.52461, 52.27249],
    [10.52464, 52.27253],
    [10.52467, 52.27259],
    [10.52468, 52.27262],
    [10.5247, 52.27271],
    [10.52471, 52.27276],
    [10.5247, 52.27284],
    [10.5247, 52.27286],
    [10.52489, 52.27282],
    [10.52513, 52.27272],
    [10.52528, 52.27267],
    [10.52537, 52.27264],
    [10.52568, 52.27256],
    [10.52579, 52.27253],
    [10.52583, 52.27252],
    [10.52595, 52.2725],
    [10.52604, 52.2725],
    [10.52618, 52.27249],
    [10.52637, 52.27251],
    [10.5266, 52.27252],
    [10.5269, 52.27253],
    [10.52721, 52.27254],
    [10.52739, 52.27256],
    [10.52752, 52.27255],
    [10.52761, 52.27254],
    [10.52781, 52.27251],
    [10.52803, 52.27247],
    [10.52813, 52.27247],
    [10.52886, 52.27255],
    [10.52913, 52.27256],
    [10.52918, 52.27242],
    [10.52926, 52.27214],
    [10.52927, 52.27207],
    [10.52933, 52.27189],
    [10.52942, 52.27164],
    [10.52955, 52.27128],
    [10.52963, 52.27105],
    [10.52973, 52.27069],
    [10.52977, 52.27059],
    [10.52984, 52.27034],
    [10.52989, 52.27016],
    [10.52991, 52.27009],
    [10.53, 52.26981],
    [10.53013, 52.26939],
    [10.53023, 52.26941],
    [10.53035, 52.26942],
    [10.53043, 52.26944],
    [10.5305, 52.26944],
    [10.53054, 52.26938],
    [10.53128, 52.26957],
    [10.53233, 52.26985],
    [10.53232, 52.26981],
    [10.53231, 52.26977],
    [10.53229, 52.26973],
    [10.53219, 52.26953],
    [10.53214, 52.26942],
    [10.53207, 52.26926],
    [10.53206, 52.26925],
    [10.53196, 52.26906],
    [10.53196, 52.26891],
    [10.53201, 52.26876],

    // point

    [10.53208, 52.26863],
    [10.53213, 52.26857],
    [10.53222, 52.26847],
    [10.5324, 52.26832],
    [10.53248, 52.26826],
    [10.53259, 52.26816],
    [10.53265, 52.26811],
    [10.53275, 52.26803],
    [10.53288, 52.26792],
    [10.53294, 52.26782],
    [10.53297, 52.26769],
    [10.53298, 52.26763],
    [10.53301, 52.26761],
    [10.53307, 52.26756],
    [10.5331, 52.26752],
    [10.53311, 52.26743],
    [10.53312, 52.26738],
    [10.53312, 52.26733],
    [10.53312, 52.26719],
    [10.53309, 52.26708],
    [10.53303, 52.267],
    [10.53299, 52.26699],
    [10.53287, 52.26696],
    [10.53279, 52.26695],
    [10.53274, 52.26693],
    [10.5326, 52.26686],
    [10.53252, 52.2668],
    [10.53243, 52.2667],
    [10.53237, 52.26663],
    [10.53232, 52.26657],
    [10.53224, 52.26656],
    [10.53219, 52.26656],

    // point

    [10.53236, 52.26657],
    [10.53243, 52.26657],
    [10.53249, 52.26657],
    [10.53258, 52.2666],
    [10.53263, 52.26655],
    [10.53334, 52.2665],
    [10.53341, 52.26633],
    [10.53344, 52.26625],
    [10.53348, 52.26618],
    [10.5335, 52.26616],
    [10.53356, 52.26604],
    [10.53363, 52.26599],
    [10.53364, 52.26597],
    [10.53365, 52.26595],
    [10.53366, 52.26594],
    [10.53367, 52.2659],
    [10.53376, 52.26577],
    [10.53377, 52.26576],
    [10.53384, 52.2656],
    [10.53385, 52.26559],
    [10.53385, 52.26545],
    [10.53385, 52.26542],
    [10.53382, 52.26531],
    [10.5338, 52.26525],
    [10.53366, 52.26509],
    [10.53375, 52.26504],
    [10.53383, 52.26498],
    [10.53387, 52.26492],
    [10.53391, 52.26484],
    [10.53395, 52.2648],
    [10.53395, 52.26476],
    [10.53393, 52.26463],
    [10.53393, 52.26461],
    [10.53394, 52.26459],
    [10.53396, 52.26456],
    [10.53404, 52.26449],
    [10.53443, 52.26427],
    [10.53456, 52.26419],
    [10.53463, 52.26414],
    [10.53464, 52.26413],
    [10.53488, 52.26396],
    [10.53505, 52.26388],
    [10.53512, 52.26385],
    [10.53521, 52.26379],
    [10.53523, 52.26375],
    [10.53526, 52.26372],
    [10.53524, 52.26367],
    [10.53522, 52.2636],
    [10.53519, 52.26357],
    [10.53516, 52.26353],
    [10.53509, 52.26348],
    [10.53504, 52.26344],
    [10.53503, 52.26344],
    [10.53494, 52.26339],
    [10.53472, 52.26337],
    [10.5346, 52.26337],
    [10.53448, 52.2634],
    [10.53447, 52.2634],
    [10.53439, 52.26344],
    [10.53417, 52.26363],
    [10.53417, 52.26305],
    [10.53415, 52.26298],
    [10.53404, 52.26286],
    [10.53309, 52.2619],
    [10.53282, 52.26164],
    [10.53261, 52.26142],
    [10.53258, 52.26139],
    [10.53249, 52.26128],
    [10.53238, 52.26135],
    [10.53245, 52.26125],
    [10.53239, 52.26118],
    [10.53217, 52.26098],
    [10.53195, 52.26075],
    [10.53179, 52.26058],
    [10.53192, 52.26047],
    [10.53198, 52.26043],
    [10.53204, 52.26037],
    [10.53208, 52.26033],
    [10.53211, 52.26028],
    [10.53213, 52.26025],
    [10.53213, 52.26021],
    [10.5321, 52.26013],
    [10.53209, 52.26009],
    [10.53208, 52.26006],
    [10.53205, 52.26001],
    [10.53198, 52.25994],
    [10.5319, 52.25985],
    [10.5318, 52.25976],
    [10.53172, 52.25969],
    [10.53151, 52.25948],
    [10.53135, 52.25933],
    [10.53131, 52.25929],
    [10.53129, 52.25927],
    [10.53104, 52.25902],
    [10.53095, 52.25896],
    [10.53092, 52.25894],
    [10.53085, 52.25891],
    [10.53082, 52.25891],
    [10.53068, 52.25889],
    [10.53054, 52.25888],
    [10.53053, 52.25888],
    [10.53042, 52.25888],
    [10.5304, 52.25888],
    [10.53032, 52.25888],
    [10.53018, 52.2589],
    [10.5301, 52.25893],
    [10.52999, 52.25899],
    [10.52992, 52.25904],
    [10.52985, 52.25912],
    [10.52979, 52.25932],
    [10.52963, 52.25914],
    [10.52926, 52.25872],
    [10.52924, 52.25871],
    [10.52923, 52.2587],
    [10.52922, 52.2587],
    [10.52921, 52.2587],
    [10.5292, 52.25871],
    [10.52919, 52.25871],
    [10.52916, 52.25872],
    [10.52912, 52.25874],
    [10.52908, 52.25875],
    [10.52907, 52.25874],
    [10.52906, 52.25873],
    [10.52902, 52.25864],
    [10.52901, 52.2586],
    [10.52901, 52.25857],
    [10.52904, 52.25853],
    [10.52908, 52.25848],
    [10.52852, 52.25845],
    [10.52832, 52.25842],
    [10.52801, 52.2584],
    [10.52808, 52.25829],
    [10.5281, 52.25827],
    [10.52813, 52.25815],
    [10.52815, 52.25803],
    [10.52815, 52.25797],
    [10.52813, 52.25791],
    [10.52819, 52.25784],
    [10.52817, 52.25778],
    [10.52816, 52.25773],
    [10.52814, 52.25769],
    [10.52807, 52.25755],
    [10.52802, 52.25746],
    [10.52793, 52.25736],
    [10.52792, 52.25732],
    [10.52778, 52.25728],
    [10.52773, 52.25726],
    [10.52759, 52.25722],
    [10.52753, 52.25722],
    [10.52744, 52.25722],
    [10.5274, 52.25722],
    [10.52732, 52.25723],
    [10.52715, 52.25723],
    [10.52705, 52.25725],
    [10.52699, 52.25727],
    [10.52694, 52.25728],
    [10.52691, 52.25729],
    [10.52687, 52.25731],
    [10.5268, 52.25735],
    [10.52677, 52.25736],
    [10.52663, 52.25741],
    [10.52649, 52.25748],
    [10.52621, 52.25763],
    [10.52609, 52.2577],
    [10.526, 52.25778],
    [10.52592, 52.25783],
    [10.52583, 52.2579],
    [10.52575, 52.25794],
    [10.52567, 52.25798],
    [10.52558, 52.25803],
    [10.52554, 52.25804],
    [10.52545, 52.25807],
    [10.52536, 52.2581],
    [10.52527, 52.25812],
    [10.52519, 52.25814],
    [10.52512, 52.25815],
    [10.52503, 52.25816],
    [10.52495, 52.25817],
    [10.5248, 52.25819],
    [10.52471, 52.25819],
    [10.52461, 52.25821],
    [10.52451, 52.25823],
    [10.52437, 52.25826],
    [10.52433, 52.25828],
    [10.52418, 52.2583],
    [10.52414, 52.25831],
    [10.524, 52.25835],
    [10.52373, 52.25842],
    [10.52312, 52.25856],
    [10.52308, 52.25848],
  ],
};

var pointsWithData = [
  {
    id: "1",
    latitude: 52.27251,
    longitude: 10.52506,
    artist: "IAK TU Braunschweig",
    art: "West auf Nordwest",
    photo:
      "https://uploads-ssl.webflow.com/65d8ad0cd93afddf231c919e/6647705274ed37c148ede228_01_%20IAK%20TU%20BS_WestAufNordwest.JPG",
    moreInformationLink: "https://example.com/more-information-1",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.27251,10.52506",
    type: "new",
  },
  {
    id: "2",
    latitude: 52.26827,
    longitude: 10.53307,
    artist: "Jacqueline Hen",
    art: "One’s Sunset is Another One’s Sunrise",
    photo:
      "https://uploads-ssl.webflow.com/65d8ad0cd93afddf231c919e/664df56f18670e99b30f09a1_02_Hen_Bild_Vorschau.jpg",
    moreInformationLink: "https://example.com/more-information-2",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.26827,10.53307",
    type: "new",
  },
  {
    id: "3",
    latitude: 52.26387,
    longitude: 10.53479,
    artist: "Christian Holl",
    art: "Observer",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/66477051ef6043151292b20c_03_Holl_Observer-p-2000.jpg",
    moreInformationLink: "https://example.com/more-information-3",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.26387,10.53479",
    type: "new",
  },
  {
    id: "4",
    latitude: 52.26293,
    longitude: 10.53476,
    artist: "Christine Schulz",
    art: "reflexion_reflexion",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/66477051d587830a9eaf37f8_04_Schulz_Reflections.jpg",
    moreInformationLink: "https://example.com/more-information-4",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.26293,10.53476",
    type: "new",
  },
  {
    id: "5",
    latitude: 52.25971,
    longitude: 10.53092,
    artist: "Jens Pecho",
    art: "Great Tits Mobbing Phallic Landmark",
    photo:
      "https://uploads-ssl.webflow.com/65d8ad0cd93afddf231c919e/664df56f63f2fdb1afda134c_05_Pecho_GreatTitsMobbingPhallicLandmark_Vorschau.jpg",
    moreInformationLink: "https://example.com/more-information-5",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.25971,10.53092",
    type: "new",
  },
  {
    id: "6",
    latitude: 52.25832,
    longitude: 10.53039,
    artist: "Šejla Kamerić",
    art: "TGIF",
    photo:
      "https://cdn.prod.website-files.com/65d8ad0cd93afddf231c919e/6656dd5a97bda43f1d3b4e74_06_Kameric_TGIF%202-p-2000.jpg",
    moreInformationLink: "https://example.com/more-information-6",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.25832,10.53039",
    type: "new",
  },
  {
    id: "7",
    latitude: 52.257528,
    longitude: 10.521583,
    artist: "Luzinterruptus",
    art: "(Plastic) Full Moon",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/66477051f3775e316a7ed88e_07_Luzinterruptus_PlasticFullMoon-p-2000.jpg",
    moreInformationLink: "https://example.com/more-information-7",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.25752,10.52157",
    type: "new",
  },
  {
    id: "8",
    latitude: 52.25595,
    longitude: 10.52289,
    artist: "Jan Philip Scheibe",
    art: "Rotlicht",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/66477051d6db5fa50c92ce0c_08_Scheibe_Rotlicht-p-2000.jpg",
    moreInformationLink: "https://example.com/more-information-8",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.25595,10.52289",
    type: "new",
  },
  {
    id: "9",
    latitude: 52.25276,
    longitude: 10.52364,
    artist: "Alona Rodeh",
    art: "Slow Swan Social Club",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/664770525301d826ec139a56_09_Rodeh_SlowSwanSocialClub.png",
    moreInformationLink: "https://example.com/more-information-9",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.25276,10.52364",
    type: "new",
  },
  {
    id: "10",
    latitude: 52.25348,
    longitude: 10.52083,
    artist: "Bettina Pousttchi",
    art: "Swarm",
    photo:
      "https://uploads-ssl.webflow.com/65d8ad0cd93afddf231c919e/664df56f6190cbd0d2527a9f_10_Pousttchi_Swarm_Vorschau.jpg",
    moreInformationLink: "https://example.com/more-information-10",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.25348,10.52083",
    type: "new",
  },
  {
    id: "11",
    latitude: 52.25922,
    longitude: 10.51909,
    artist: "Marinella Senatore",
    art: "Assembly",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/66477052c886028bc3228914_11_Senatore_Assembly-p-3200.jpg",
    moreInformationLink: "https://example.com/more-information-11",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.25922,10.51909",
    type: "new",
  },
  {
    id: "12",
    latitude: 52.26383,
    longitude: 10.50957,
    artist: "IAK TU Braunschweig",
    art: "BETRETEN VERBOTEN",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/6647705227d1968ae2f89495_12_IAK%20TU%20BS_BetretenVerboten-p-2000.jpg",
    moreInformationLink: "https://example.com/more-information-12",
    navigationLink:
      " https://www.google.com/maps/dir/?api=1&destination=52.26383,10.50957",
    type: "new",
  },
  {
    id: "13",
    latitude: 52.26868,
    longitude: 10.51427,
    artist: "Monica Bonvicini",
    art: "Hit & Run Lovers",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/664ccf6896dbbbd29afbed49_13_Bonvicini_HitAndRunLovers.jpg",
    moreInformationLink: "https://example.com/more-information-13",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.26868,10.51427",
    type: "new",
  },
  {
    id: "I",
    latitude: 52.266537,
    longitude: 10.53256,
    artist: "Michael Sailstorfer",
    art: "Solarkatze",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/65e61cdd40214dd81cfa4b4a_placeholder.webp",
    moreInformationLink: "https://example.com/more-information-I",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.266537,%2010.532560",
    type: "static",
  },
  {
    id: "II",
    latitude: 52.266243,
    longitude: 10.53368,
    artist: "Yvonne Goulbier",
    art: "Evokation in Rot",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/664b398f3e12d32613a89344_evokation_in_rot.webp",
    moreInformationLink: "https://example.com/more-information-II",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.266243,%2010.533680",
    type: "static",
  },
  {
    id: "III",
    latitude: 52.259072,
    longitude: 10.517271,
    artist: "Fabrizio Plessi",
    art: "Bogen der Erinnerung",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/664b39699829d6b151cd483b_Bogen_der_Erinnerung.webp",
    moreInformationLink: "https://example.com/more-information-III",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.259072,%2010.517271",
    type: "static",
  },
  {
    id: "IV",
    latitude: 52.262591,
    longitude: 10.512541,
    artist: "Mark Dion",
    art: "Der Elster Flohmarkt",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/664b3bde873cbddf8e32f31e__MG_2152-HDR.webp",
    moreInformationLink: "https://example.com/more-information-IV",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.262591,%2010.512541",
    type: "static",
  },
  {
    id: "V",
    latitude: 52.257061,
    longitude: 10.526222,
    artist: "Johannes Wohnseifer",
    art: "No Sleep",
    photo:
      "https://assets-global.website-files.com/65d8ad0cd93afddf231c919e/664b3c02917c5e16afa1d86d_No_Sleep.webp",
    moreInformationLink: "https://example.com/more-information-V",
    navigationLink:
      "https://www.google.com/maps/dir/?api=1&destination=52.25742,10.52617",
    type: "static",
  },
];

var modifiers = {
  selected: "__selected",
  hovered: "__hovered",
  open: "__open",
};
var selectors = {
  marker: "marker",
  newMarker: "newMarker marker",
  newMarkerSelected: "newMarker marker" + modifiers.selected,
  staticMarker: "staticMarker marker",
  staticMarkerSelected: "staticMarker marker" + modifiers.selected,
  about: "about",
  aboutOpen: "about" + modifiers.open,
  aboutHeaderArtId: "about-header-artId",
  aboutHeaderArtist: "about-header-artist",
  aboutHeaderArt: "about-header-art",
  aboutHeaderLink: "about-header-link",
  aboutHeaderClose: "about-header-close",
  aboutPhoto: "about-photo",
  aboutLink: "about-link",
  aboutLinkNavigation: "about-link-navigation",
  searchOptions: "search-options",
  searchOptionsOpen: "search-options" + modifiers.open,
  searchOptionsEntry: "search-options-entry",
  searchInput: "search-input",
};

var map = L.map("map").setView([52.265, 10.5268], 14);

L.geoJSON(routeGeojsonFeature, {
  style: {
    color: "#2a1f7e",
    weight: 5,
  },
}).addTo(map);

map.zoomControl.setPosition("bottomright");

var tiles = L.tileLayer(
  "http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",
  {
    maxZoom: 19,
    attribution:
      '<a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
  }
).addTo(map);

pointsWithData.forEach(function (point) {
  if (point.type === "new") {
    renderPoint(point, selectors.newMarker);
  } else {
    renderPoint(point, selectors.staticMarker);
  }
});

function renderPoint(point, selector) {
  L.marker([point.latitude, point.longitude], {
    icon: generateIcon(point),
  })
    .addTo(map)
    // this on mouseover in order to emulate hover effect -- highlight hovered marker
    .on("mouseover", function (event) {
      // if marker is already selected -- do nothing
      if (
        event.target
          .getElement()
          .classList.contains(selectors.marker + modifiers.selected)
      )
        return;

      // highligt by setting new icon
      event.target.setIcon(generateIcon(point, modifiers.hovered));
    })
    // this on mouseout in order to reset hover effect -- after mouse leaves marker, reset to default state
    .on("mouseout", function (event) {
      // if marker is already selected -- do nothing
      if (
        event.target
          .getElement()
          .classList.contains(selectors.marker + modifiers.selected)
      )
        return;

      // reset by setting default icon
      event.target.setIcon(generateIcon(point));
    })
    // this on click in order to emulate selected effect -- highlight selected marker
    // and open about information in popup
    .on("click", function (event) {
      // find previously selected marker and try to unselect
      tryUnselect(selectors.marker);

      event.target.setIcon(generateIcon(point, modifiers.selected));

      // find "about" container element
      var aboutElement = findFirstElementByClass(selectors.about);
      aboutElement.classList.add(selectors.aboutOpen);

      aboutElement.dataset.pointId = point.id;
      aboutElement.dataset.pointType = point.type;

      // adding current point title to about popup
      var aboutTitleElementArtId = findFirstElementByClass(
        selectors.aboutHeaderArtId
      );
      aboutTitleElementArtId.textContent = point.id;

      var aboutTitleElementArtist = findFirstElementByClass(
        selectors.aboutHeaderArtist
      );
      aboutTitleElementArtist.textContent = point.artist;

      var aboutTitleElementArt = findFirstElementByClass(
        selectors.aboutHeaderArt
      );
      aboutTitleElementArt.textContent = point.art;

      // adding current point photo to about popup
      var aboutPhotoElement = findFirstElementByClass(
        selectors.aboutPhoto
      );
      aboutPhotoElement.src = point.photo;

      // adding current point links to about popup
      var aboutHeaderLinkElement = findFirstElementByClass(
        selectors.aboutHeaderLink
      );
      if (aboutHeaderLinkElement) {
        console.log(aboutHeaderLinkElement);
        aboutHeaderLinkElement.href = point.moreInformationLink;
      } else {
        console.error("More information link element not found");
      }

      var aboutLinkNavigationElement = document.querySelector(
        ".about-link.about-link-navigation"
      );
      if (aboutLinkNavigationElement) {
        aboutLinkNavigationElement.href = point.navigationLink;
      } else {
        console.error("Navigation link element not found");
      }
    });
}

var searchOptionsElement = findFirstElementByClass(
  selectors.searchOptions
);

// listen to event to elements which are added/removed dynamically
document.addEventListener("click", function (event) {
  // handle "about" popup close
  if (event.target.classList.contains(selectors.aboutHeaderClose)) {
    var aboutElement = findFirstElementByClass(selectors.about);
    aboutElement.classList.remove(selectors.aboutOpen);

    tryUnselect(selectors.marker);
  }

  // handle search options entry click
  if (event.target.classList.contains(selectors.searchOptionsEntry)) {
    searchOptionsElement.innerHTML = "";

    findFirstElementByClass(
      selectors.marker + "-" + event.target.dataset.pointId
    ).click();
  }
});

// handle search input updates in order to launch search
findFirstElementByClass(selectors.searchInput).addEventListener(
  "keyup",
  function (event) {
    searchOptionsElement.classList.add(selectors.searchOptionsOpen);

    searchOptionsElement.innerHTML = "";

    if (event.target.value === "") return;

    // filter points by search query and generate search options
    pointsWithData
      .filter(function (point) {
        return (point.id + point.artist + point.art)
          .toLowerCase()
          .includes(event.target.value.toLowerCase());
      })
      .forEach(function (point) {
        var li = document.createElement("li");

        li.classList.add(selectors.searchOptionsEntry);

        li.textContent = point.artist + " " + point.art;

        li.dataset.pointId = point.id;
        li.dataset.pointType = point.type;

        searchOptionsElement.appendChild(li);
      });
  }
);

// UTILS functions:

function generateIcon(point, modifier) {
  // Get the root element
  var root = document.documentElement;

  // Get the computed styles of the root element
  var style = getComputedStyle(root);

  // Get the value of the --marker-width variable
  var markerWidth = parseInt(style.getPropertyValue("--marker-width"));

  return L.divIcon({
    html: point.id,
    iconSize: [markerWidth, markerWidth],
    iconAnchor: [markerWidth / 2, markerWidth / 2],
    className: [
      getMarkerClassName(point.type),
      getMarkerClassName(point.type) + "-" + point.id,
      modifier ? getMarkerClassName(point.type, modifier) : null,
    ]
      .filter(Boolean)
      .join(" "),
  });
}

function getMarkerClassName(type, modifier) {
  return type + "Marker marker" + (modifier || "");
}

function findFirstElementByClass(className) {
  return document.getElementsByClassName(className)[0];
}

function tryUnselect(selector) {
  var previousSelected = findFirstElementByClass(
    selector + modifiers.selected
  );

  // if previous selected exists, remove selection
  if (previousSelected) {
    previousSelected.classList.remove(selector + modifiers.selected);
  }
}